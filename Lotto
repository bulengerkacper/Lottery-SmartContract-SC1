pragma solidity ^0.4.19;

/* author @BulKac
OpenSource drawing lots in purpose of learning smart contracts */

/* To draw lots*/
contract TDL {

	uint64 public ticketPrize = 1;
	uint private jackpot;
	uint public tickets_sold;

	struct Player {
		uint ticketsBought;
	}

	mapping(address => Player) public players;

	event LogPaymentMade(address accountAddress, uint amount);

	function TDL() {
		player = msg.sender;
	}

	function buyTicket() public returns (uint) {
		require (msg.value > ticketPrize);

		uint howManyTickets = msg.value/ticketPrize;
		uint realPrize = howManyTickets * ticketPrize;
		jackpot += msg.value;
		LogPaymentMade(msg.sender, msg.value);
		msg.sender.transfer(msg.value-realPrize);
		return howManyTickets;
		
	}

	function jackpot() constant returns (uint) {
		return balances[msg.sender];
	}
}
